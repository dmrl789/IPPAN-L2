# IPPAN-L2 Development Environment Configuration
# This config is for dev/staging environments.
#
# Usage:
#   export IPPAN_L2_CONFIG=configs/dev.toml
#   export L1_API_KEY=your-dev-api-key
#   cargo run -p fin-node
#
# Environment variables can override TOML values.

[node]
label = "dev-fin-node"

[l1]
# IPPAN CORE settlement endpoint (dev environment)
base_url = "env:L1_BASE_URL"
# API key from environment
api_key = "env:L1_API_KEY"
connect_timeout_ms = 3000
request_timeout_ms = 10000

[l1.retry]
max_attempts = 5
base_delay_ms = 250
max_delay_ms = 3000

[l1.endpoints]
chain_status = "env:L1_ENDPOINT_CHAIN_STATUS"
submit_batch = "env:L1_ENDPOINT_SUBMIT_BATCH"
get_inclusion = "env:L1_ENDPOINT_GET_INCLUSION"
get_finality = "env:L1_ENDPOINT_GET_FINALITY"

[server]
# HTTP bind address for health/metrics endpoints
bind_address = "0.0.0.0:3000"
# Enable metrics endpoint
metrics_enabled = true
max_inflight_requests = 64

[limits]
max_body_bytes = 524288
max_string_bytes = 2048
max_tags = 64
max_tag_bytes = 64
max_batch_items = 512
max_receipt_bytes = 524288
max_json_depth = 64

[rate_limit]
enabled = true
requests_per_minute = 300
burst = 120

[pagination]
default_limit = 50
max_limit = 200

[retention]
receipts_days = 14
recon_failed_days = 7
min_receipts_keep = 200

[pruning]
enabled = true
interval_secs = 86400

[cors]
enabled = false
allow_origins = []

[hubs]
# Enable FIN Hub
fin_enabled = true
# Enable DATA Hub
data_enabled = true

[storage]
# Persistent storage path
path = "/var/lib/ippan-l2/dev"

[logging]
# Log level: trace, debug, info, warn, error
level = "info"
# Output format: json, pretty
format = "json"

[oracle]
# Oracle daemon configuration
enabled = true
poll_interval_ms = 30000
