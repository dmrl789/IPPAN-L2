# IPPAN-L2 Local Development Configuration
# This config is for local development and testing.
#
# Usage:
#   export IPPAN_L2_CONFIG=configs/local.toml
#   cargo run -p fin-node
#
# Environment variables can override TOML values.

[node]
label = "local-fin-node"

[l1]
# IPPAN CORE settlement endpoint
base_url = "http://127.0.0.1:8080"
# Optional API key (leave empty for local dev)
api_key = ""
# Timeouts (ms)
connect_timeout_ms = 3000
request_timeout_ms = 10000

[l1.retry]
max_attempts = 3
base_delay_ms = 250
max_delay_ms = 2000

# IMPORTANT: endpoint paths are intentionally NOT defaulted in code.
# This repo cannot invent IPPAN CORE endpoints; you must supply the mapping.
[l1.endpoints]
chain_status = ""
submit_batch = ""
get_inclusion = ""
get_finality = ""

[server]
# HTTP bind address for health/metrics endpoints
bind_address = "127.0.0.1:3000"
# Enable metrics endpoint
metrics_enabled = true
max_inflight_requests = 256

[limits]
# Local dev: permissive defaults.
max_body_bytes = 2097152
max_string_bytes = 4096
max_tags = 128
max_tag_bytes = 128
max_batch_items = 1024
max_receipt_bytes = 2097152
max_json_depth = 128

[rate_limit]
enabled = false
requests_per_minute = 0
burst = 0

[pagination]
default_limit = 50
max_limit = 200

[retention]
receipts_days = 7
recon_failed_days = 7
min_receipts_keep = 100

[pruning]
enabled = false
interval_secs = 86400

[cors]
enabled = false
allow_origins = []

[hubs]
# Enable FIN Hub
fin_enabled = true
# Enable DATA Hub
data_enabled = true

[storage]
# Local storage path for persistent state
path = "./data/local"

[logging]
# Log level: trace, debug, info, warn, error
level = "debug"
# Output format: json, pretty
format = "pretty"

[oracle]
# Oracle daemon configuration (if running with oracle)
enabled = false
poll_interval_ms = 10000
